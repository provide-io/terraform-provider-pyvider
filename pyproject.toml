[project]
name = "terraform-provider-pyvider"
dynamic = ["version"]
description = "The official Pyvider provider, built with Pyvider."
readme = "README.md"
requires-python = ">=3.11"
dependencies = [
    "provide-foundation[all]",
    "flavorpack>=0.0.1000",
    "plating>=0.0.1000",
    "pyvider>=0.0.1000",
    "pyvider-components>=0.0.1000",
    "pyvider-cty>=0.0.1000",
]

[project.scripts]
terraform-provider-pyvider = "pyvider.cli:main"

[build-system]
requires = ["setuptools>=61.0"]
build-backend = "setuptools.build_meta"

[tool.setuptools]
py-modules = []
packages = []

[tool.flavor]
entry_point = "pyvider.cli:main"
output_path = "dist/terraform-provider-pyvider"
# Ensure the binary is named terraform-provider-pyvider so detection works
command = "{workenv}/bin/terraform-provider-pyvider"

[tool.flavor.metadata]
package_name = "terraform-provider-pyvider"

[tool.flavor.build]
# This meta package just brings together components
dependencies = []
exclude = [
    "**/.terraform/**",
    "**/.venv/**", 
    "**/__pycache__/**",
    "**/*.pyc",
    "**/*.pyo",
    "**/.DS_Store",
]

[tool.flavor.signing]
private_key_path = "keys/provider-private.key"
public_key_path = "keys/provider-public.key"

[tool.flavor.execution]
# Runtime environment configuration for Terraform provider protocol
[tool.flavor.execution.runtime]
[tool.flavor.execution.runtime.env]
# Pass through all Terraform environment variables as-is
pass = ["TF_*", "PLUGIN_*"]

[tool.uv.sources]
flavorpack = { path = "../flavorpack", editable = true }
provide-foundation = { path = "../provide-foundation", editable = true }
pyvider = { path = "../pyvider", editable = true }
pyvider-components = { path = "../pyvider-components", editable = true }
pyvider-cty = { path = "../pyvider-cty", editable = true }
plating = { path = "../plating", editable = true }
