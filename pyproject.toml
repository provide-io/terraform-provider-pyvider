[project]
name = "terraform-provider-pyvider"
version = "0.0.1"
description = "The official Pyvider provider, built with Pyvider."
readme = "README.md"
requires-python = ">=3.13"
dependencies = [
    "pyvider",
    "pyvider-builder",
    "pyvider-cty",
    "pyvider-rpcplugin",
    "pyvider-telemetry",
    "pyvider-components",
    "attrs>=23.1.0"
]
# This script name is used by the build backend to name the final executable.
# The entry point itself is now defined in the [tool.pyvider-builder] section.
scripts = { "terraform-provider-pyvider" = "pyvider.cli.__main__:main" }

[build-system]
requires = ["pyvider-builder>=0.0.11"]
build-backend = "pyvider.builder.build_backend"

[tool.pyvider-builder]
name = "pyvider"
version = "0.1.0"
output_path = "dist/terraform-provider-pyvider"
# This is the crucial change: the packaged binary now starts from the CLI main.
entry_point = "pyvider.cli.__main__:main"

[tool.pyvider-builder.build]
# This section lists the local paths for the build tool to bundle.
dependencies = [
    "../pyvider",
    "../pyvider-components",
    "pyvider-cty",
    "pyvider-rpcplugin",
    "pyvider-telemetry",
]
exclude = [
    "**/.terraform/**",
    "**/.venv/**",
    "**/__pycache__/**",
    "**/*.pyc",
    "**/*.pyo",
    "**/.DS_Store",
]

[tool.pyvider-builder.signing]
private_key_path = "keys/provider-private.key"
public_key_path = "keys/provider-public.key"
